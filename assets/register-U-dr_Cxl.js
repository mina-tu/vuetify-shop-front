import{am as k,o as C,c as M,w as l,av as S,i as B,a as t,V as F,b as v,az as U,d as e,ax as n,as as f,Z as q,ao as A,h as N}from"./index-B_ThG3UE.js";import{c as R,a as u,f as $,u as E,e as i}from"./vee-validate.esm-BtN_asyQ.js";import{v as b}from"./index-DcBOdE6S.js";import{V as P}from"./VMain-D3zJvfs5.js";import{V as T}from"./VForm-gwPP9k76.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./ssrBoot-BXCNZr9J.js";const z=f("h1",{class:"gradient-text text-h4 font-weight-bold text-center",style:{"line-height":"2"}}," Register",-1),O={class:"text-center"},L={__name:"register",setup(Z){const{api:x}=S(),w=B(),g=k(),h=R({account:u().required("使用者帳號必填").min(4,"使用者帳號長度不符").max(20,"使用者帳號長度不符").test("isAlphanumeric","使用者帳號格式錯誤",r=>b.isAlphanumeric(r)),email:u().required("使用者信箱必填").test("isEmail","使用者信箱格式錯誤",r=>b.isEmail(r)),password:u().required("使用者密碼必填").min(4,"使用者密碼長度不符").max(20,"使用者密碼長度不符"),passwordConfirm:u().oneOf([$("password")],"密碼不一致")}),{handleSubmit:_,isSubmitting:V}=E({validationSchema:h}),m=i("account"),d=i("email"),c=i("password"),p=i("passwordConfirm"),y=_(async r=>{var a,s;try{await x.post("/user",{account:r.account,email:r.email,password:r.password}),g({text:"註冊成功",snackbarProps:{color:"green"}}),w.push("/login")}catch(o){console.log(o),g({text:((s=(a=o==null?void 0:o.response)==null?void 0:a.data)==null?void 0:s.message)||"發生錯誤",snackbarProps:{color:"red"}})}});return(r,a)=>(C(),M(P,{class:"gradient-background"},{default:l(()=>[t(N,{class:"registercard"},{default:l(()=>[t(F,null,{default:l(()=>[t(v,{cols:"12"},{default:l(()=>[z]),_:1}),t(v,{cols:"12",style:{padding:"2rem"}},{default:l(()=>[t(T,{onSubmit:U(e(y),["prevent"]),disabled:e(V)},{default:l(()=>[t(n,{label:"帳號",minlength:"4",maxlength:"20",counter:"",modelValue:e(m).value.value,"onUpdate:modelValue":a[0]||(a[0]=s=>e(m).value.value=s),"error-messages":e(m).errorMessage.value,class:"blue-text"},null,8,["modelValue","error-messages"]),t(n,{label:"信箱",type:"email",modelValue:e(d).value.value,"onUpdate:modelValue":a[1]||(a[1]=s=>e(d).value.value=s),"error-messages":e(d).errorMessage.value,class:"blue-text"},null,8,["modelValue","error-messages"]),t(n,{label:"密碼",type:"password",minlength:"4",maxlength:"20",counter:"",modelValue:e(c).value.value,"onUpdate:modelValue":a[2]||(a[2]=s=>e(c).value.value=s),"error-messages":e(c).errorMessage.value,class:"blue-text"},null,8,["modelValue","error-messages"]),t(n,{label:"確認密碼",type:"password",minlength:"4",maxlength:"20",counter:"",modelValue:e(p).value.value,"onUpdate:modelValue":a[3]||(a[3]=s=>e(p).value.value=s),"error-messages":e(p).errorMessage.value,class:"blue-text"},null,8,["modelValue","error-messages"]),f("div",O,[t(q,{class:"custom-btn",type:"submit",loading:e(V)},{default:l(()=>[A("註冊")]),_:1},8,["loading"])])]),_:1},8,["onSubmit","disabled"])]),_:1})]),_:1})]),_:1})]),_:1}))}};export{L as default};
