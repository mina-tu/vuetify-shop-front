import{am as f,M as k,o as l,a as y,w as s,i as h,b as r,d as n,as as u,f as i,g as V,F as g,V as v,av as b,ar as d}from"./index-H5nSHe2R.js";import{b as w}from"./VList-CYUSQiv9.js";import{v as x}from"./VDataTable-C0TuIkAp.js";import"./ssrBoot-D0RtTzDF.js";const A=u("h1",{class:"text-center"},"訂單查詢",-1),I={__name:"orders",setup(B){const{apiAuth:m}=b(),p=f(),c=k([]),_=[{title:"編號",key:"_id"},{title:"日期",key:"createdAt",value:t=>new Date(t.createdAt).toLocaleString()},{title:"商品",key:"cart",sortable:!1},{title:"金額",key:"price",value:t=>t.cart.reduce((a,e)=>a+e.quantity*e.p_id.price,0)}];return(async()=>{var t,a;try{const{data:e}=await m.get("/order");c.value.push(...e.result)}catch(e){console.log(e),p({text:((a=(t=e==null?void 0:e.response)==null?void 0:t.data)==null?void 0:a.message)||"發生錯誤",snackbarProps:{color:"red"}})}})(),(t,a)=>(l(),y(h,null,{default:s(()=>[r(v,null,{default:s(()=>[r(n,{cols:"12"},{default:s(()=>[A]),_:1}),r(w),r(n,{cols:"12"},{default:s(()=>[r(x,{items:c.value,headers:_},{"item.cart":s(e=>[u("ul",null,[(l(!0),i(g,null,V(e.item.cart,o=>(l(),i("li",{key:o._id},d(o.p_id.name)+" * "+d(o.quantity),1))),128))])]),_:2},1032,["items"])]),_:1})]),_:1})]),_:1}))}};export{I as default};
